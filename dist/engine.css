:root{--color-bg-primary: #1a1a1a;--color-bg-secondary: #151515;--color-bg-tertiary: #0d0d0d;--color-bg-header: #0d0d0d;--color-bg-input: #2a2a2a;--color-bg-button: linear-gradient(180deg, #2a2a2a 0%, #222 100%);--color-bg-button-hover: linear-gradient(180deg, #333 0%, #2a2a2a 100%);--color-bg-button-primary: linear-gradient(180deg, #2d4a2d 0%, #1e3a1e 100%);--color-bg-button-primary-hover: linear-gradient(180deg, #3d5a3d 0%, #2d4a2d 100%);--color-bg-button-danger: linear-gradient(180deg, #4a2d2d 0%, #3a1e1e 100%);--color-bg-button-danger-hover: linear-gradient(180deg, #5a3d3d 0%, #4a2d2d 100%);--color-text-primary: #d0d0d0;--color-text-secondary: #888;--color-text-muted: #666;--color-text-dim: #555;--color-text-accent: #8a8;--color-text-choice: #8ac;--color-text-ending: #ca8;--color-border-primary: #333;--color-border-secondary: #444;--color-border-focus: #555;--color-border-accent: #3a4a3a;--color-scrollbar-track: #1a1a1a;--color-scrollbar-thumb: #333;--color-scrollbar-thumb-hover: #444;--font-ui: "Segoe UI", system-ui, -apple-system, sans-serif;--font-story: Georgia, "Times New Roman", serif;--font-mono: "Consolas", "Monaco", monospace;--font-size-base: 1rem;--font-size-sm: .85rem;--font-size-xs: .8rem;--font-size-xxs: .75rem;--font-size-story: 1.15rem;--line-height-base: 1.5;--line-height-story: 1.85;--spacing-xs: .25rem;--spacing-sm: .5rem;--spacing-md: .75rem;--spacing-lg: 1rem;--spacing-xl: 1.5rem;--spacing-xxl: 2rem;--radius-sm: 3px;--radius-md: 4px;--radius-lg: 6px;--radius-xl: 8px;--transition-fast: .15s ease;--transition-normal: .2s ease}:root.light-theme{--color-bg-primary: #f5f5f5;--color-bg-secondary: #ffffff;--color-bg-tertiary: #e8e8e8;--color-bg-header: #ffffff;--color-bg-input: #ffffff;--color-bg-button: linear-gradient(180deg, #f0f0f0 0%, #e0e0e0 100%);--color-bg-button-hover: linear-gradient(180deg, #e8e8e8 0%, #d8d8d8 100%);--color-bg-button-primary: linear-gradient(180deg, #4a8a4a 0%, #3a7a3a 100%);--color-bg-button-primary-hover: linear-gradient(180deg, #5a9a5a 0%, #4a8a4a 100%);--color-bg-button-danger: linear-gradient(180deg, #c44 0%, #a33 100%);--color-bg-button-danger-hover: linear-gradient(180deg, #d55 0%, #b44 100%);--color-text-primary: #333;--color-text-secondary: #666;--color-text-muted: #888;--color-text-dim: #aaa;--color-text-accent: #2a6a2a;--color-text-choice: #2a4a6a;--color-text-ending: #8a4a2a;--color-border-primary: #ddd;--color-border-secondary: #ccc;--color-border-focus: #999;--color-border-accent: #4a8a4a;--color-scrollbar-track: #f0f0f0;--color-scrollbar-thumb: #ccc;--color-scrollbar-thumb-hover: #bbb}*{box-sizing:border-box;margin:0;padding:0}html,body{height:100%}body{font-family:var(--font-ui);background:var(--color-bg-primary);color:var(--color-text-primary);font-size:var(--font-size-base);line-height:var(--line-height-base)}button{background:var(--color-bg-button);color:#ccc;border:1px solid var(--color-border-primary);padding:.4rem 1rem;font-family:inherit;font-size:var(--font-size-sm);cursor:pointer;border-radius:var(--radius-md);transition:all var(--transition-fast)}button:hover{background:var(--color-bg-button-hover);border-color:var(--color-border-secondary);color:#fff}button:active{transform:translateY(1px)}button.primary{background:var(--color-bg-button-primary);border-color:#3d5a3d}button.primary:hover{background:var(--color-bg-button-primary-hover);border-color:#4d6a4d}button.danger{background:var(--color-bg-button-danger);border-color:#5a3d3d}button.danger:hover{background:var(--color-bg-button-danger-hover)}button:disabled{opacity:.5;cursor:not-allowed}input,textarea,select{background:var(--color-bg-input);border:1px solid var(--color-border-secondary);color:var(--color-text-primary);padding:.5rem .75rem;font-family:inherit;font-size:var(--font-size-sm);border-radius:var(--radius-md);transition:border-color var(--transition-normal),box-shadow var(--transition-normal)}input:focus,textarea:focus,select:focus{outline:none;border-color:var(--color-border-focus);box-shadow:0 0 0 3px #ffffff0d}input::placeholder,textarea::placeholder{color:var(--color-text-dim)}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--color-scrollbar-track)}::-webkit-scrollbar-thumb{background:var(--color-scrollbar-thumb);border-radius:var(--radius-md)}::-webkit-scrollbar-thumb:hover{background:var(--color-scrollbar-thumb-hover)}.modal-overlay{display:none;position:fixed;inset:0;background:#000000b3;z-index:100;align-items:center;justify-content:center}.modal-overlay.visible{display:flex}.modal{background:var(--color-bg-primary);border:1px solid var(--color-border-primary);border-radius:var(--radius-xl);padding:var(--spacing-xl);max-width:500px;width:90%;max-height:90vh;overflow-y:auto}.modal h3{font-size:1rem;font-weight:400;margin-bottom:var(--spacing-lg);color:var(--color-text-secondary)}.modal-buttons{display:flex;gap:var(--spacing-md);justify-content:flex-end;margin-top:var(--spacing-xl)}.hidden{display:none!important}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.text-mono{font-family:var(--font-mono)}.text-muted{color:var(--color-text-muted)}.text-accent{color:var(--color-text-accent)}.kbd{display:inline-block;padding:.1rem .4rem;font-family:var(--font-mono);font-size:.75rem;background:var(--color-bg-tertiary);border:1px solid var(--color-border-primary);border-radius:var(--radius-sm);box-shadow:0 1px 0 var(--color-border-primary)}.toast-container{position:fixed;bottom:var(--spacing-xl);right:var(--spacing-xl);z-index:200;display:flex;flex-direction:column;gap:var(--spacing-sm)}.toast{background:var(--color-bg-secondary);border:1px solid var(--color-border-primary);border-radius:var(--radius-md);padding:var(--spacing-md) var(--spacing-lg);font-size:var(--font-size-sm);box-shadow:0 4px 12px #0000004d;animation:slideIn .3s ease}.toast.success{border-left:3px solid #4a8a4a}.toast.error{border-left:3px solid #8a4a4a}.toast.warning{border-left:3px solid #8a6a3a}@keyframes slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.spinner{width:20px;height:20px;border:2px solid var(--color-border-primary);border-top-color:var(--color-text-accent);border-radius:50%;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.font-size-small{--font-size-story: .95rem}.font-size-medium{--font-size-story: 1.15rem}.font-size-large{--font-size-story: 1.35rem}.font-size-xlarge{--font-size-story: 1.55rem}body{background:linear-gradient(145deg,#0d0d0d,#1a1a1a,#0d0d0d);min-height:100vh;display:flex;flex-direction:column}header{background:#0006;border-bottom:1px solid #2a2a2a;padding:var(--spacing-lg) var(--spacing-xxl);display:flex;justify-content:center;gap:var(--spacing-xxl);flex-wrap:wrap;align-items:center}.control-group{display:flex;align-items:center;gap:var(--spacing-sm)}.control-group label{font-size:var(--font-size-xxs);color:var(--color-text-muted);text-transform:uppercase;letter-spacing:.05em}#story-folder{width:140px}#page-jump{width:90px;font-family:var(--font-mono)}.settings-group{display:flex;align-items:center;gap:var(--spacing-md)}.font-size-control{display:flex;align-items:center;gap:var(--spacing-xs)}.font-size-control button{width:28px;height:28px;padding:0;display:flex;align-items:center;justify-content:center;font-size:1rem}.theme-toggle{width:32px;height:32px;padding:0;display:flex;align-items:center;justify-content:center;font-size:1.1rem;border-radius:50%}.volume-control{display:flex;align-items:center;gap:var(--spacing-sm)}.volume-control input[type=range]{width:80px;height:4px;-webkit-appearance:none;background:var(--color-border-primary);border-radius:2px;cursor:pointer}.volume-control input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:var(--color-text-accent);border-radius:50%;cursor:pointer}main{flex:1;display:flex;flex-direction:column;align-items:center;padding:3rem var(--spacing-xxl);overflow-y:auto}#content{width:100%;max-width:800px}#menu{text-align:center;padding-top:15vh}#menu h1{font-size:2rem;font-weight:300;color:var(--color-text-secondary);margin-bottom:var(--spacing-lg);letter-spacing:.1em}#menu p{color:var(--color-text-dim);font-size:.95rem}.story-meta{margin-bottom:var(--spacing-xxl);text-align:center}.story-meta h1{font-size:2.5rem;font-weight:300;margin-bottom:var(--spacing-md);color:var(--color-text-primary)}.story-meta .author{font-size:1rem;color:var(--color-text-muted);margin-bottom:var(--spacing-md)}.story-meta .description{font-size:.95rem;color:var(--color-text-dim);max-width:600px;margin:0 auto var(--spacing-xl);line-height:1.6}#game{display:none}#story{font-family:var(--font-story);font-size:var(--font-size-story);line-height:var(--line-height-story);color:#c8c8c8;margin-bottom:2.5rem}#story p{margin-bottom:1.25rem;text-indent:0}#story p:last-child{margin-bottom:0}#story em,#story i{font-style:italic}#story strong,#story b{font-weight:700;color:#e0e0e0}#story blockquote{border-left:3px solid var(--color-border-primary);padding-left:var(--spacing-lg);margin:var(--spacing-lg) 0;color:var(--color-text-muted);font-style:italic}.story-image{display:block;max-width:100%;margin:1.5rem auto;border-radius:var(--radius-md);box-shadow:0 4px 20px #00000080}.story-image.size-small{max-height:200px;width:auto}.story-image.size-medium{max-height:400px;width:auto}.story-video{display:block;max-width:100%;margin:1.5rem auto;border-radius:var(--radius-md);box-shadow:0 4px 20px #00000080;background:#000}.audio-player{position:fixed;bottom:80px;right:var(--spacing-lg);background:var(--color-bg-secondary);border:1px solid var(--color-border-primary);border-radius:var(--radius-lg);padding:var(--spacing-md);display:none;align-items:center;gap:var(--spacing-sm)}.audio-player.visible{display:flex}.audio-player .audio-title{font-size:var(--font-size-xs);color:var(--color-text-muted);max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.audio-player button{width:28px;height:28px;padding:0;font-size:.9rem}#choices{display:flex;flex-direction:column;gap:var(--spacing-md)}#choices button{background:linear-gradient(180deg,#1e1e1e,#181818);border:1px solid #2a2a2a;padding:var(--spacing-lg) 1.25rem;font-family:var(--font-story);font-size:1rem;text-align:left;color:var(--color-text-secondary);border-radius:var(--radius-lg);position:relative;overflow:hidden}#choices button:before{content:"";position:absolute;left:0;top:0;bottom:0;width:3px;background:#444;transition:background var(--transition-normal),width var(--transition-normal)}#choices button:hover{background:linear-gradient(180deg,#252525,#1e1e1e);border-color:#3a3a3a;color:#ddd}#choices button:hover:before{background:#666;width:4px}#choices button:focus{outline:2px solid var(--color-text-accent);outline-offset:2px}#choices button .choice-key{display:inline-block;width:24px;height:24px;background:var(--color-bg-tertiary);border:1px solid var(--color-border-primary);border-radius:var(--radius-sm);text-align:center;line-height:22px;font-family:var(--font-mono);font-size:var(--font-size-xs);margin-right:var(--spacing-sm);color:var(--color-text-muted)}#choices button.continue-btn{text-align:center;color:var(--color-text-secondary);font-style:italic}#choices button.continue-btn:before{display:none}#choices button.continue-btn .choice-key{margin-right:var(--spacing-sm)}#ending{display:none;margin-top:var(--spacing-xxl);padding:var(--spacing-xl);background:#ffffff08;border:1px solid #2a2a2a;border-radius:var(--radius-lg);text-align:center}#ending strong{display:block;font-size:1.1rem;color:var(--color-text-secondary);margin-bottom:var(--spacing-lg);font-weight:400;letter-spacing:.15em;text-transform:uppercase}.variables-panel{position:fixed;top:80px;right:var(--spacing-lg);background:var(--color-bg-secondary);border:1px solid var(--color-border-primary);border-radius:var(--radius-lg);padding:var(--spacing-md);min-width:150px;display:none;font-size:var(--font-size-xs)}.variables-panel.visible{display:block}.variables-panel h4{font-size:var(--font-size-xxs);text-transform:uppercase;letter-spacing:.05em;color:var(--color-text-muted);margin-bottom:var(--spacing-sm);padding-bottom:var(--spacing-xs);border-bottom:1px solid var(--color-border-primary)}.variable-item{display:flex;justify-content:space-between;padding:var(--spacing-xs) 0}.variable-item .var-name{color:var(--color-text-muted)}.variable-item .var-value{font-family:var(--font-mono);color:var(--color-text-accent)}footer{background:#0006;border-top:1px solid #2a2a2a;padding:var(--spacing-md) var(--spacing-xxl);display:none;justify-content:center;gap:3rem;font-size:var(--font-size-xs)}footer.visible{display:flex}.status-item{display:flex;gap:var(--spacing-sm)}.status-label{color:var(--color-text-dim);text-transform:uppercase;letter-spacing:.05em}.status-value{font-family:var(--font-mono);color:var(--color-text-secondary)}.error{color:#a66;font-style:italic;text-align:center;padding:var(--spacing-xxl)}.keyboard-hint{position:fixed;bottom:var(--spacing-lg);left:50%;transform:translate(-50%);background:var(--color-bg-secondary);border:1px solid var(--color-border-primary);border-radius:var(--radius-md);padding:var(--spacing-sm) var(--spacing-lg);font-size:var(--font-size-xs);color:var(--color-text-muted);opacity:0;transition:opacity var(--transition-normal);pointer-events:none}.keyboard-hint.visible{opacity:1}.import-options{display:flex;gap:var(--spacing-lg);justify-content:center;margin-top:var(--spacing-xxl)}.import-option{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-md);padding:var(--spacing-xl);background:var(--color-bg-secondary);border:1px solid var(--color-border-primary);border-radius:var(--radius-lg);cursor:pointer;transition:border-color var(--transition-fast),background var(--transition-fast);min-width:150px}.import-option:hover{border-color:var(--color-text-accent);background:#8aaa8a0d}.import-option .icon{font-size:2rem}.import-option .label{font-size:var(--font-size-sm);color:var(--color-text-secondary)}.import-option input[type=file]{display:none}@media (max-width: 600px){header{padding:var(--spacing-lg);gap:var(--spacing-lg)}main{padding:var(--spacing-xxl) 1.25rem}#story{font-size:1.05rem}footer{gap:1.5rem;flex-wrap:wrap}.settings-group{display:none}.audio-player{bottom:70px;left:var(--spacing-lg);right:var(--spacing-lg);justify-content:center}.variables-panel{top:auto;bottom:80px;left:var(--spacing-lg);right:var(--spacing-lg)}}@media print{header,footer,#choices,.audio-player,.variables-panel{display:none!important}body{background:#fff;color:#000}#story{color:#000}main{padding:0}}
